<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>PEC - Free60 Wiki archive</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">Free60 Wiki archive</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../%21TODO/" class="nav-link">ToDo</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#header" class="nav-link">Header</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#notes" class="nav-link">Notes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p><strong>PEC</strong> (Profile Embedded Content) files are used by the Xbox 360 as an
additional layer of security on profiles. Certain <a href="GPD" title="wikilink">GPD</a>
files are relocated inside the PEC file. The PEC file stores information
on avatar clothes/items, and is just another STFS package. With this
said you must properly rehash and resign the PEC file to avoid the Xbox
detecting corruption of the package. Rehashing is the same as all STFS
packages (besides the starting block), but resigning is different (view
below).</p>
<h1 id="header">Header</h1>
<table>
<thead>
<tr>
<th>Offset</th>
<th>Length</th>
<th>Type</th>
<th>Information</th>
</tr>
</thead>
<tbody>
<tr>
<td>0x0</td>
<td>0x228</td>
<td>[[Console_Security_Certificate</td>
<td>Console Security Certificate]]</td>
</tr>
<tr>
<td>0x228</td>
<td>0x14</td>
<td>bytes</td>
<td>SHA1 hash from 0x23C-0x1000</td>
</tr>
<tr>
<td>0x23C</td>
<td>0x8</td>
<td>signed long</td>
<td>Unknown</td>
</tr>
<tr>
<td>0x244</td>
<td>0x24</td>
<td>[[STFS#Volume_Descriptor</td>
<td>Structure]]</td>
</tr>
<tr>
<td>0x268</td>
<td>0x4</td>
<td>signed int</td>
<td>Unknown</td>
</tr>
<tr>
<td>0x26C</td>
<td>0x8</td>
<td>bytes</td>
<td>Profile ID</td>
</tr>
<tr>
<td>0x274</td>
<td>0x1</td>
<td>byte</td>
<td>Unknown</td>
</tr>
<tr>
<td>0x275</td>
<td>0x5</td>
<td>bytes</td>
<td>Console ID</td>
</tr>
</tbody>
</table>
<h1 id="notes">Notes</h1>
<p>The Console ID at 0x275 must match the Console ID located in the
<a href="Console_Security_Certificate" title="wikilink">Console Security Certificate</a>,
otherwise the Xbox360 will see it as a corrupted file.</p>
<p>The signature located in the <a href="Console_Security_Certificate" title="wikilink">Console Security
Certificate</a> is signed using
the hash at location 0x228. (SHA1 hash from 0x23C - 0x1000)</p>
<p>From 0x1000 the rest of the file is the standard block portion of
<a href="STFS" title="wikilink">STFS</a>, with data block 0 starting at 0x3000, and hash
table 0 at 0x1000/0x2000. The PEC file always has 2 hash tables (type 1
package).</p>
<p><a href="Category_Xbox360_System_Software">Category:Xbox360_System_Software</a></p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
